commands:
  - name: "say-hello"
    short: "say hello in javascript"
    lang: node
    flags:
      - name: "name"
        short: "n"
        required: true
    # language=JavaScript
    cmd: |
      const util = require('node:util')      
      console.log('Nice to see you {{ .GetFlag "name"}}!')
      let hour=0, minute=0, second = 0;      
      setInterval(() => {
          second+=1
          if (second > 59) {
              minute += 1;
              second = 0;
          }          
          if (minute > 59) {
              hour += 1;
              minute = 0;
          }                    
          console.log(util.format(
              `%s:%s:%s`,
              String(hour).padStart(2,'0'),
              String(minute).padStart(2,'0'),
              String(second).padStart(2,'0')                            
          ))
      }, 1000)
        
  - name: "key-gen"
    parent: "ssh"
    short: "generates a new ssh key"
    flags:
      - name: "key"
        short: "k"
        required: true
      - name: "comment"
        short: "c"
        required: true
    #language=sh
    cmd: |
      key="$HOME/.ssh/{{ .GetFlag "key" }}.id_rsa"
      if [[ -f $key ]]; then
        echo "key $key already exists"
        exit 1
      fi;

      ssh-keygen -t rsa \
        -q \
        -f "$key" \
        -C {{ .GetFlag "comment"}} \
        -N ""

      ssh-add $key && cat "${key}.pub"